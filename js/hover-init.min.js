const THREE=window.THREE,gsap=window.gsap,hoverEffect=window.hoverEffect,importMapSupported=()=>{const e=document.createElement("script");return"importmap"in e},isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);isSafari&&!importMapSupported()&&(console.warn("‚ö†Ô∏è Safari tanpa importmap support ‚Äî hoverEffect dinonaktifkan."),document.querySelectorAll(".divDistortion2").forEach(e=>{const t=e.querySelector(".image1"),n=e.querySelector(".image2");t&&n&&(t.classList.remove("lg:w-[0.1px]","lg:h-[0.1px]","pointer-events-none"),t.classList.add("w-full","h-full"),n.classList.add("hidden"))}),sessionStorage.setItem("hoverEffectInitialized","true")),importMapSupported||(console.warn("‚ö†Ô∏è Browser tidak support importmap ‚Üí hoverEffect dinonaktifkan."),document.querySelectorAll(".divDistortion2").forEach(e=>{const t=e.querySelector(".image1"),n=e.querySelector(".image2");t&&n&&(t.classList.remove("lg:w-[0.1px]","lg:h-[0.1px]","pointer-events-none"),t.classList.add("w-full","h-full"),n.classList.add("hidden"))}),sessionStorage.setItem("hoverEffectInitialized","true")),window.addEventListener("load",()=>{const t=!sessionStorage.getItem("hoverEffectInitialized"),n=performance.getEntriesByType("navigation")[0].type,s=location.pathname==="/",o=t&&s&&n==="navigate"?9e3:100;setTimeout(()=>{if(!importMapSupported)return;document.querySelectorAll(".divDistortion").forEach(t=>{e(t,.3,"/images/distortion/ramen.jpg")}),document.querySelectorAll(".divDistortion2").forEach(t=>{e(t,.3,"/images/distortion/heightMap.png")}),sessionStorage.setItem("hoverEffectInitialized","true")},o);function e(e,t,n){const i="/images/default.png",d=e.dataset.image1||e.querySelector(".image1")?.src||i;let a=e.dataset.image2||e.querySelector(".image2")?.src;(!a||a==="")&&(a=d,console.log("üåÄ Hanya satu gambar tersedia ‚Üí image2 diisi dari image1:",a));const s=new Image,o=new Image;s.src=d,o.src=a;let r=!1,c=!1;const l=()=>{if(r&&c){if(s.src.includes(i)&&o.src.includes(i)){console.warn("‚ö†Ô∏è Semua gambar fallback ‚Äî hoverEffect dilewati:",e);return}const a=s.naturalHeight/s.naturalWidth;setTimeout(()=>{try{new hoverEffect({parent:e,angle:Math.PI/4,intensity1:t,intensity2:t,image1:s.src,image2:o.src,displacementImage:n,imagesRatio:a,speedIn:1,speedOut:1}),setTimeout(()=>{e.querySelectorAll(".image1, .image2").forEach(e=>{e.classList.add("lg:w-[0.1px]","lg:h-[0.1px]","pointer-events-none")})},500),sessionStorage.removeItem("hoverReloaded"),console.log("‚úÖ Hover effect diterapkan:",e)}catch(e){console.warn("‚ùå hoverEffect gagal:",e)}},0)}};s.onload=()=>{r=!0,l()},s.onerror=()=>u(s,e,".image1"),o.onload=()=>{c=!0,l()},o.onerror=()=>u(o,e,".image2");function u(e,t,n){console.warn(`‚ö†Ô∏è Gagal load (${e.src}) ‚Üí fallback ke default.png`),e.src=i;const s=t.querySelector(n);s&&(s.src=i),n.includes("1")&&(r=!0),n.includes("2")&&(c=!0),l()}}})